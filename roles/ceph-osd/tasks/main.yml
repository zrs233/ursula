---
- name: check for correct scenario input
  fail: msg="Please select only one OSD scenario!"
  when: (ceph_osd.journal_collocation and ceph_osd.raw_multi_journal) or 
        (ceph_osd.journal_collocation and ceph_osd.osd_directory) or
        (ceph_osd.raw_multi_journal and ceph_osd.osd_directory)

- name: install dependencies
  apt: pkg=parted
       state=present

- name: copy osd bootstrap key
  copy: src=fetch/{{ ceph_common.fsid }}/var/lib/ceph/bootstrap-osd/ceph.keyring
        dest=/var/lib/ceph/bootstrap-osd/ceph.keyring
        owner=root
        group=root
        mode=600
  when: ceph_common.cephx

- include: tasks/scenarios/journal_collocation.yml
  when: ceph_osd.journal_collocation

- include: tasks/scenarios/raw_multi_journal.yml
  when: ceph_osd.raw_multi_journal

- include: tasks/scenarios/osd_directory.yml
  when: ceph_osd.osd_directory
